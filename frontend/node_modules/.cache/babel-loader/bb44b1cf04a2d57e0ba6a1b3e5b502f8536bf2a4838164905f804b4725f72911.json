{"ast":null,"code":"import React,{useState,useMemo}from'react';import{Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TableSortLabel,Typography,Box,Skeleton,Alert,Chip,Avatar,useTheme,useMediaQuery,alpha}from'@mui/material';import{motion}from'framer-motion';import GlassCard from'../ui/GlassCard';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StandingsTable=_ref=>{let{standings,loading=false,error=null,showConferenceStats=true,compact=false}=_ref;const theme=useTheme();const isMobile=useMediaQuery(theme.breakpoints.down('md'));const isTablet=useMediaQuery(theme.breakpoints.down('lg'));const[sortBy,setSortBy]=useState('rank');const[sortOrder,setSortOrder]=useState('asc');// Define table columns\nconst columns=useMemo(()=>[{id:'rank',label:'Rank',minWidth:60,sortable:true,align:'center',format:(value,row)=>value?/*#__PURE__*/_jsx(Chip,{label:\"#\".concat(value),size:\"small\",sx:{background:value<=25?'linear-gradient(135deg, #4caf50 0%, #66bb6a 100%)':'linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.1) 100%)',color:'#ffffff',fontWeight:600,minWidth:'45px'}}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"NR\"})},{id:'team',label:'Team',minWidth:200,sortable:false,align:'left',format:(_,row)=>/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1.5},children:[/*#__PURE__*/_jsx(Avatar,{src:row.team.imageUrl,alt:row.team.name,sx:{width:compact?24:32,height:compact?24:32,border:\"1px solid \".concat(alpha('#ffffff',0.2))},children:row.team.name.charAt(0)}),/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Typography,{variant:compact?'body2':'body1',fontWeight:600,color:\"text.primary\",children:row.team.name}),!isMobile&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"text.secondary\",sx:{display:'block'},children:row.team.conference})]})]})},{id:'wins',label:'Wins',minWidth:60,sortable:true,align:'center',hideOnMobile:compact},{id:'losses',label:'Losses',minWidth:60,sortable:true,align:'center',hideOnMobile:compact},{id:'win_percentage',label:'Win %',minWidth:80,sortable:true,align:'center',format:value=>/*#__PURE__*/_jsxs(Typography,{variant:compact?'body2':'body1',fontWeight:600,color:value>=0.75?'success.main':value>=0.5?'warning.main':'error.main',children:[(value*100).toFixed(1),\"%\"]})},...(showConferenceStats?[{id:'conference_record',label:'Conf W-L',minWidth:90,sortable:false,align:'center',hideOnMobile:isTablet,format:(_,row)=>/*#__PURE__*/_jsxs(Typography,{variant:compact?'body2':'body1',children:[row.conference_wins,\"-\",row.conference_losses]})},{id:'conference_win_percentage',label:'Conf %',minWidth:80,sortable:true,align:'center',hideOnMobile:isTablet,format:value=>/*#__PURE__*/_jsxs(Typography,{variant:compact?'body2':'body1',fontWeight:600,color:value>=0.75?'success.main':value>=0.5?'warning.main':'error.main',children:[(value*100).toFixed(1),\"%\"]})}]:[])],[showConferenceStats,compact,isMobile,isTablet]);// Visible columns based on screen size\nconst visibleColumns=useMemo(()=>columns.filter(col=>!(isMobile&&col.hideOnMobile)),[columns,isMobile]);// Sort data\nconst sortedStandings=useMemo(()=>{if(!(standings!==null&&standings!==void 0&&standings.length))return[];const sorted=[...standings].sort((a,b)=>{let aVal;let bVal;switch(sortBy){case'rank':aVal=a.rank||999;bVal=b.rank||999;break;case'wins':aVal=a.wins;bVal=b.wins;break;case'losses':aVal=a.losses;bVal=b.losses;break;case'win_percentage':aVal=a.win_percentage;bVal=b.win_percentage;break;case'conference_wins':aVal=a.conference_wins;bVal=b.conference_wins;break;case'conference_losses':aVal=a.conference_losses;bVal=b.conference_losses;break;case'conference_win_percentage':aVal=a.conference_win_percentage;bVal=b.conference_win_percentage;break;default:return 0;}if(aVal<bVal)return sortOrder==='asc'?-1:1;if(aVal>bVal)return sortOrder==='asc'?1:-1;return 0;});return sorted;},[standings,sortBy,sortOrder]);const handleSort=field=>{const isAsc=sortBy===field&&sortOrder==='asc';setSortOrder(isAsc?'desc':'asc');setSortBy(field);};const tableVariants={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:0.4,staggerChildren:0.05}}};const rowVariants={initial:{opacity:0,x:-20},animate:{opacity:1,x:0},hover:{backgroundColor:alpha('#ffffff',0.08),transition:{duration:0.2}}};if(error){return/*#__PURE__*/_jsx(GlassCard,{children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{background:'transparent',border:\"1px solid \".concat(theme.palette.error.main,\"40\")},children:error})});}return/*#__PURE__*/_jsx(GlassCard,{hover:false,children:/*#__PURE__*/_jsxs(TableContainer,{component:motion.div,variants:tableVariants,initial:\"initial\",animate:\"animate\",sx:{maxHeight:compact?400:600,'&::-webkit-scrollbar':{width:'8px',height:'8px'},'&::-webkit-scrollbar-track':{background:alpha('#ffffff',0.1),borderRadius:'8px'},'&::-webkit-scrollbar-thumb':{background:alpha('#ffffff',0.3),borderRadius:'8px','&:hover':{background:alpha('#ffffff',0.4)}}},children:[/*#__PURE__*/_jsxs(Table,{stickyHeader:true,size:compact?'small':'medium',children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{children:visibleColumns.map(column=>/*#__PURE__*/_jsx(TableCell,{align:column.align,style:{minWidth:column.minWidth},sx:{background:'linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0.1) 100%)',backdropFilter:'blur(20px)',borderBottom:\"1px solid \".concat(alpha('#ffffff',0.1)),fontWeight:700,fontSize:compact?'0.75rem':'0.875rem',color:'text.primary'},children:column.sortable?/*#__PURE__*/_jsx(TableSortLabel,{active:sortBy===column.id,direction:sortBy===column.id?sortOrder:'asc',onClick:()=>handleSort(column.id),sx:{color:'text.primary !important','&.Mui-active':{color:'primary.main !important'},'& .MuiTableSortLabel-icon':{color:'primary.main !important'}},children:column.label}):column.label},column.id))})}),/*#__PURE__*/_jsx(TableBody,{children:loading?// Loading skeleton\nArray.from({length:10}).map((_,index)=>/*#__PURE__*/_jsx(TableRow,{children:visibleColumns.map(column=>/*#__PURE__*/_jsx(TableCell,{align:column.align,children:/*#__PURE__*/_jsx(Skeleton,{variant:\"text\",width:column.id==='team'?'80%':'60%',height:compact?20:24,sx:{background:alpha('#ffffff',0.1)}})},column.id))},\"skeleton-\".concat(index))):sortedStandings.map((standing,index)=>/*#__PURE__*/_jsx(TableRow,{component:motion.tr,variants:rowVariants,initial:\"initial\",animate:\"animate\",whileHover:\"hover\",sx:{cursor:'pointer','&:hover':{backgroundColor:alpha('#ffffff',0.08)}},custom:index,children:visibleColumns.map(column=>/*#__PURE__*/_jsx(TableCell,{align:column.align,sx:{borderBottom:\"1px solid \".concat(alpha('#ffffff',0.05)),padding:compact?'8px 12px':'12px 16px'},children:column.format?column.format(standing[column.id],standing):String(standing[column.id]||'')},column.id))},standing.id))})]}),!loading&&sortedStandings.length===0&&/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'center',alignItems:'center',minHeight:200,flexDirection:'column',gap:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"text.secondary\",children:\"No standings data available\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Try adjusting your filters or check back later\"})]})]})});};export default StandingsTable;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}